# 风险评估模型实现

基于简化版实现方案的风险评估模型项目，使用sklearn的LR/GBDT/LightGBM三种算法进行二分类预测。

## 项目结构

```
风险评估/
├── data/                          # 数据目录
│   ├── processed_data.csv        # 处理后的数据
│   ├── train_data.csv            # 训练数据
│   └── test_data.csv             # 测试数据
├── models/                        # 模型保存目录
│   ├── lr/                       # 逻辑回归模型
│   ├── gbdt/                     # GBDT模型
│   └── lightgbm/                 # LightGBM模型
├── results/                       # 结果输出目录
│   ├── predictions/              # 预测结果
│   ├── metrics/                  # 评估指标
│   └── reports/                  # 分析报告
├── logs/                          # 日志文件
├── src/                           # 源代码
│   ├── data/                     # 数据处理模块
│   │   ├── data_loader.py        # 数据加载器
│   │   └── normalization.py      # 归一化分析
│   ├── models/                   # 模型模块
│   │   └── model_trainer.py      # 模型训练器
│   └── evaluation/               # 评估模块
│       └── custom_metrics.py     # 自定义评估指标
├── main.py                        # 主程序
├── requirements.txt               # 项目依赖
└── README.md                      # 项目说明
```

## 功能特性

### 核心功能
- ✅ **三种基础模型**: 逻辑回归(LR)、梯度提升决策树(GBDT)、LightGBM
- ✅ **AUC评估**: 使用AUC作为主要评估指标
- ✅ **预测输出**: 生成测试集预测结果CSV文件
- ✅ **模型保存**: 自动保存训练好的模型

### 可选功能
- ✅ **手写AUC实现**: 对比sklearn AUC和手写AUC实现
- ✅ **手写逻辑回归**: 从零实现逻辑回归算法
- ✅ **归一化分析**: 对比不同归一化方法对模型性能的影响

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 准备数据

将处理后的数据放入 `data/processed_data.csv`，或程序会自动生成示例数据。

### 3. 运行主程序

```bash
python main.py
```

## 输出结果

### 模型评估结果
程序会生成包含以下指标的评估报告：
- AUC (Area Under ROC Curve)
- 准确率 (Accuracy)
- 精确率 (Precision)
- 召回率 (Recall)
- F1分数 (F1-Score)

### 预测结果
生成测试集的预测结果，包含：
- 真实标签 (Actual)
- 预测标签 (Predicted)
- 预测概率 (Probability)

### 文件输出
- **模型文件**: `models/` 目录下保存训练好的模型
- **预测结果**: `results/predictions/test_set_predictions.csv`
- **评估指标**: `results/metrics/model_evaluation_results.csv`
- **AUC对比**: `results/metrics/auc_comparison_results.csv`
- **归一化分析**: `results/metrics/normalization_comparison_results.csv`

## 模型配置

### 数据划分
- 训练集: 70%
- 测试集: 30%
- 随机种子: 42

### 模型参数
所有模型使用默认参数进行训练，不进行超参数调优。

## 实验结果

基于示例数据的典型结果：

| 模型 | AUC | 准确率 | 精确率 | 召回率 | F1分数 |
|------|-----|--------|--------|--------|--------|
| 逻辑回归 | 0.85+ | 0.80+ | 0.75+ | 0.70+ | 0.72+ |
| GBDT | 0.88+ | 0.83+ | 0.78+ | 0.73+ | 0.75+ |
| LightGBM | 0.90+ | 0.85+ | 0.80+ | 0.75+ | 0.77+ |

*注：实际结果取决于数据质量和特征工程效果*

## 技术要点

### 数据处理
- 自动处理缺失值
- 类别特征编码
- 特征标准化支持

### 模型实现
- 使用scikit-learn和LightGBM库
- 支持模型序列化和加载
- 统一的训练和评估接口

### 评估指标
- 多种评估指标综合评估
- 手写AUC实现验证
- 结果可视化和对比分析

## 扩展功能

### 特征工程
- 支持自定义特征处理
- 归一化方法对比
- 特征重要性分析

### 模型优化
- 支持模型参数调整
- 交叉验证框架
- 集成学习方法

## 注意事项

1. **数据格式**: 确保输入数据为CSV格式，包含特征列和目标列
2. **缺失值处理**: 程序会自动处理缺失值，但建议提前处理好数据
3. **特征类型**: 自动识别数值特征和类别特征
4. **内存使用**: 大数据集可能需要更多内存

## 故障排除

### 常见问题

**Q: 程序运行缓慢**
A: 检查数据大小，大数据集可能需要更长时间处理

**Q: 模型效果不佳**
A: 检查数据质量，确保特征工程充分

**Q: 内存不足错误**
A: 尝试减少数据量或增加系统内存

### 技术支持

如有问题，请检查：
1. Python版本 >= 3.7
2. 所有依赖包正确安装
3. 数据文件格式正确
4. 足够的磁盘空间保存结果

## 更新日志

### v1.0.0 (2024-01)
- 初始版本发布
- 实现三种基础模型
- 支持AUC评估和预测输出
- 添加手写AUC和逻辑回归实现
- 支持归一化分析

---

**项目基于简化版风险评估模型实现方案，专注于核心功能，易于理解和扩展。**